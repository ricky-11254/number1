!function(){"use strict";var t=window.wp.element;function e(t,e){const{dispatch:o,select:a}=wp.data;wp.data.dispatch("core/block-editor").insertBlocks(t),null!==e.title&&wp.data.dispatch("core/editor").editPost({title:e.title}),null!==e.excerpt&&wp.data.dispatch("core/editor").editPost({excerpt:e.excerpt}),null!==e.categories&&e.categories.forEach((t=>{!function(t){const{dispatch:e,select:o}=wp.data;let a=o("core/editor").getEditedPostAttribute("categories"),n=o("core/edit-post").isEditorPanelOpened("taxonomy-panel-category");a.includes(t)||(a.push(t),e("core/editor").editPost({categories:a}),n&&(e("core/edit-post").toggleEditorPanelOpened("taxonomy-panel-category"),e("core/edit-post").toggleEditorPanelOpened("taxonomy-panel-category")))}(t)})),null!==e.tags&&e.tags.forEach((t=>{!function(t){const{dispatch:e,select:o}=wp.data;let a=o("core/editor").getEditedPostAttribute("tags"),n=o("core/edit-post").isEditorPanelOpened("taxonomy-panel-tags");a.includes(t)||(a.push(t),e("core/editor").editPost({tags:a}),n&&(e("core/edit-post").toggleEditorPanelOpened("taxonomy-panel-tags"),e("core/edit-post").toggleEditorPanelOpened("taxonomy-panel-tags")))}(t)})),null!==e.author&&wp.data.dispatch("core/editor").editPost({author:e.author}),null!==e.date&&wp.data.dispatch("core/editor").editPost({date:e.date}),null!==e.status&&wp.data.dispatch("core/editor").editPost({status:e.status})}const{PluginDocumentSettingPanel:o}=wp.editPost,{Component:a}=wp.element,{__:__}=wp.i18n,{FormFileUpload:n}=wp.components,{registerPlugin:r}=wp.plugins;r("daextulma-import-document",{icon:!1,render:class extends a{render(){return(0,t.createElement)(o,{name:"daextulma-import-document",title:__("Import Markdown","ultimate-markdown")},(0,t.createElement)(n,{isLarge:!0,className:"block-library-gallery-add-item-button",onChange:()=>{const t=event.target.files[0],o=new FormData;o.append("action","daextulma_import_document"),o.append("security",window.DAEXTULMA_PARAMETERS.nonce),o.append("uploaded_file",t),fetch(window.DAEXTULMA_PARAMETERS.ajaxUrl,{method:"POST",body:o}).then((function(t){return t.json()})).then((function(t){let o=marked(t.content);o=DOMPurify.sanitize(o,{USE_PROFILES:{html:!0}}),wp.data.dispatch("core/block-editor").resetBlocks([]),e(wp.blocks.rawHandler({HTML:o}),t)}))},accept:".md,.markdown,.mdown,.mkdn,.mkd,.mdwn,.mdtxt,.mdtext,.text,.txt",icon:"insert"},__("Upload file and import","ultimate-markdown")))}}});const{dispatch:d,select:i}=wp.data,{PluginDocumentSettingPanel:c}=wp.editPost,{Component:s}=wp.element,{__:l}=wp.i18n,{Button:m,SelectControl:p}=wp.components,{registerPlugin:u}=wp.plugins;u("daextulma-load-document",{icon:!1,render:class extends s{constructor(t){super(...arguments),this.state={documentIdSelectorValue:""}}render(){const o=i("core/editor").getEditedPostAttribute("meta")._import_markdown_pro_load_document_selector;return(0,t.createElement)(c,{name:"daextulma-load-document",title:l("Load Markdown","ultimate-markdown")},(0,t.createElement)(p,{label:l("Markdown document","ultimate-markdown"),help:l("Select a Markdown document, then click the submit document button to generate the corresponding blocks.","ultimate-markdown"),value:o,onChange:t=>{d("core/editor").editPost({meta:{_import_markdown_pro_load_document_selector:t}}),this.setState({documentIdSelectorValue:t})},options:window.DAEXTULMA_PARAMETERS.documents}),(0,t.createElement)(m,{variant:"secondary",className:"editor-post-trash is-destructive",onClick:()=>{const t=i("core/editor").getEditedPostAttribute("meta")._import_markdown_pro_load_document_selector;if(0===parseInt(t,10))return;const o=new FormData;o.append("action","daextulma_load_document"),o.append("security",window.DAEXTULMA_PARAMETERS.nonce),o.append("document_id",t),fetch(window.DAEXTULMA_PARAMETERS.ajaxUrl,{method:"POST",body:o}).then((function(t){return t.json()})).then((function(t){let o=marked(t.content);o=DOMPurify.sanitize(o,{USE_PROFILES:{html:!0}}),wp.data.dispatch("core/block-editor").resetBlocks([]),e(wp.blocks.rawHandler({HTML:o}),t)}))}},l("Submit document","ultimate-markdown")))}}});const{Button:w,TextareaControl:_}=wp.components,{dispatch:h,select:g}=wp.data,{PluginDocumentSettingPanel:k}=wp.editPost,{Component:E}=wp.element,{__:P}=wp.i18n,{registerPlugin:x}=wp.plugins;x("submit-text",{icon:!1,render:class extends E{constructor(t){super(...arguments),this.state={textareaValue:""}}render(){const o=g("core/editor").getEditedPostAttribute("meta")._import_markdown_pro_submit_text_textarea;return(0,t.createElement)(k,{name:"submit-text",title:P("Submit Markdown","ultimate-markdown")},(0,t.createElement)(_,{label:P("Markdown text","ultimate-markdown"),help:P("Enter the Markdown text, then click the submit text button to generate the corresponding blocks.","ultimate-markdown"),value:o,onChange:t=>{h("core/editor").editPost({meta:{_import_markdown_pro_submit_text_textarea:t}}),this.setState({textareaValue:t})}}),(0,t.createElement)(w,{variant:"secondary",className:"editor-post-trash is-destructive",onClick:()=>{const t=new FormData;t.append("action","daextulma_submit_markdown"),t.append("security",window.DAEXTULMA_PARAMETERS.nonce),t.append("markdowntext",o),fetch(window.DAEXTULMA_PARAMETERS.ajaxUrl,{method:"POST",body:t}).then((t=>t.json())).then((t=>{let o=marked(t.content);o=DOMPurify.sanitize(o,{USE_PROFILES:{html:!0}}),wp.data.dispatch("core/block-editor").resetBlocks([]),e(wp.blocks.rawHandler({HTML:o}),t),h("core/editor").editPost({meta:{_import_markdown_pro_submit_text_textarea:""}}),this.setState({textareaValue:""})}))}},P("Submit text","ultimate-markdown")))}}})}();